-- MySQL Script generated by MySQL Workbench
-- 05/10/16 22:33:37
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema tccAnhembi
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `tccAnhembi` ;

-- -----------------------------------------------------
-- Schema tccAnhembi
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `tccAnhembi` DEFAULT CHARACTER SET utf8 ;
USE `tccAnhembi` ;

-- -----------------------------------------------------
-- Table `TB_DISPOSITIVOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TB_DISPOSITIVOS` ;

CREATE TABLE IF NOT EXISTS `TB_DISPOSITIVOS` (
  `ID_DISPOSITIVO` INT NOT NULL AUTO_INCREMENT,
  `MAC_ADRESS` VARCHAR(45) NOT NULL,
  `NM_DISPOSITIVO` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_DISPOSITIVO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `TB_GRUPOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TB_GRUPOS` ;

CREATE TABLE IF NOT EXISTS `TB_GRUPOS` (
  `ID_GRUPO` INT NOT NULL AUTO_INCREMENT,
  `NM_GRUPO` VARCHAR(45) NOT NULL,
  `HR_INICIO_ACESSO` TIME NULL,
  `HR_FIM_ACESSO` VARCHAR(45) NULL,
  `DT_INICIO_ACESSO` VARCHAR(45) NULL,
  `DT_FIM_ACESSO` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_GRUPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `TB_USUARIOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TB_USUARIOS` ;

CREATE TABLE IF NOT EXISTS `TB_USUARIOS` (
  `ID_USUARIO` INT NOT NULL AUTO_INCREMENT,
  `NM_USUARIO` VARCHAR(45) NULL,
  `CERTIFICADO` VARCHAR(10000) NOT NULL,
  PRIMARY KEY (`ID_USUARIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `TB_SMARTPHONE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TB_SMARTPHONE` ;

CREATE TABLE IF NOT EXISTS `TB_SMARTPHONE` (
  `ID_SMARTPHONE` INT NOT NULL AUTO_INCREMENT,
  `IMEI` VARCHAR(30) NOT NULL,
  `ICCID` VARCHAR(30) NOT NULL,
  `TB_USUARIOS_ID_USUARIO` INT NOT NULL,
  PRIMARY KEY (`ID_SMARTPHONE`, `TB_USUARIOS_ID_USUARIO`),
  INDEX `fk_TB_SMARTPHONE_TB_USUARIOS1_idx` (`TB_USUARIOS_ID_USUARIO` ASC),
  CONSTRAINT `fk_TB_SMARTPHONE_TB_USUARIOS1`
    FOREIGN KEY (`TB_USUARIOS_ID_USUARIO`)
    REFERENCES `TB_USUARIOS` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `TB_DISPOSITIVOS_has_TB_GRUPOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TB_DISPOSITIVOS_has_TB_GRUPOS` ;

CREATE TABLE IF NOT EXISTS `TB_DISPOSITIVOS_has_TB_GRUPOS` (
  `TB_DISPOSITIVOS_ID_DISPOSITIVO` INT NOT NULL,
  `TB_GRUPOS_ID_GRUPO` INT NOT NULL,
  PRIMARY KEY (`TB_DISPOSITIVOS_ID_DISPOSITIVO`, `TB_GRUPOS_ID_GRUPO`),
  INDEX `fk_TB_DISPOSITIVOS_has_TB_GRUPOS_TB_GRUPOS1_idx` (`TB_GRUPOS_ID_GRUPO` ASC),
  INDEX `fk_TB_DISPOSITIVOS_has_TB_GRUPOS_TB_DISPOSITIVOS_idx` (`TB_DISPOSITIVOS_ID_DISPOSITIVO` ASC),
  CONSTRAINT `fk_TB_DISPOSITIVOS_has_TB_GRUPOS_TB_DISPOSITIVOS`
    FOREIGN KEY (`TB_DISPOSITIVOS_ID_DISPOSITIVO`)
    REFERENCES `TB_DISPOSITIVOS` (`ID_DISPOSITIVO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TB_DISPOSITIVOS_has_TB_GRUPOS_TB_GRUPOS1`
    FOREIGN KEY (`TB_GRUPOS_ID_GRUPO`)
    REFERENCES `TB_GRUPOS` (`ID_GRUPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `TB_USUARIOS_has_TB_GRUPOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TB_USUARIOS_has_TB_GRUPOS` ;

CREATE TABLE IF NOT EXISTS `TB_USUARIOS_has_TB_GRUPOS` (
  `TB_USUARIOS_ID_USUARIO` INT NOT NULL,
  `TB_GRUPOS_ID_GRUPO` INT NOT NULL,
  PRIMARY KEY (`TB_USUARIOS_ID_USUARIO`, `TB_GRUPOS_ID_GRUPO`),
  INDEX `fk_TB_USUARIOS_has_TB_GRUPOS_TB_GRUPOS1_idx` (`TB_GRUPOS_ID_GRUPO` ASC),
  INDEX `fk_TB_USUARIOS_has_TB_GRUPOS_TB_USUARIOS1_idx` (`TB_USUARIOS_ID_USUARIO` ASC),
  CONSTRAINT `fk_TB_USUARIOS_has_TB_GRUPOS_TB_USUARIOS1`
    FOREIGN KEY (`TB_USUARIOS_ID_USUARIO`)
    REFERENCES `TB_USUARIOS` (`ID_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TB_USUARIOS_has_TB_GRUPOS_TB_GRUPOS1`
    FOREIGN KEY (`TB_GRUPOS_ID_GRUPO`)
    REFERENCES `TB_GRUPOS` (`ID_GRUPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE = '';
GRANT USAGE ON *.* TO tccanhembi;
 DROP USER tccanhembi;
SET SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';
CREATE USER 'tccanhembi' IDENTIFIED BY 'tccanhembi';

GRANT ALL ON * TO 'tccanhembi';
GRANT SELECT ON TABLE * TO 'tccanhembi';
GRANT SELECT, INSERT, TRIGGER ON TABLE * TO 'tccanhembi';
GRANT SELECT, INSERT, TRIGGER, UPDATE, DELETE ON TABLE * TO 'tccanhembi';

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `TB_DISPOSITIVOS`
-- -----------------------------------------------------
START TRANSACTION;
USE `tccAnhembi`;
INSERT INTO `TB_DISPOSITIVOS` (`ID_DISPOSITIVO`, `MAC_ADRESS`, `NM_DISPOSITIVO`) VALUES (1, '123456789987654321', 'NETBEANS');

COMMIT;


-- -----------------------------------------------------
-- Data for table `TB_GRUPOS`
-- -----------------------------------------------------
START TRANSACTION;
USE `tccAnhembi`;
INSERT INTO `TB_GRUPOS` (`ID_GRUPO`, `NM_GRUPO`, `HR_INICIO_ACESSO`, `HR_FIM_ACESSO`, `DT_INICIO_ACESSO`, `DT_FIM_ACESSO`) VALUES (1, 'TESTE', NULL, NULL, NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `TB_USUARIOS`
-- -----------------------------------------------------
START TRANSACTION;
USE `tccAnhembi`;
INSERT INTO `TB_USUARIOS` (`ID_USUARIO`, `NM_USUARIO`, `CERTIFICADO`) VALUES (1, 'TIAGO', 'rO0ABXNyAC1qYXZhLnNlY3VyaXR5LmNlcnQuQ2VydGlmaWNhdGUkQ2VydGlmaWNhdGVSZXCJJ2qdya48DAIAAlsABGRhdGF0AAJbQkwABHR5cGV0ABJMamF2YS9sYW5nL1N0cmluZzt4cHVyAAJbQqzzF_gGCFTgAgAAeHAAAAQaMIIEFjCCAv6gAwIBAgIICDGbU5XH-eUwDQYJKoZIhvcNAQELBQAwFTETMBEGA1UEAwwKdGNjQW5oZW1iaTAeFw0xNjA1MDIwMDAwMDBaFw0xODA1MDIwMDAwMDBaMBUxEzARBgNVBAMMCnRjY0FuaGVtYmkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCf0bnEgHDx84fqynjp8lDz70tvwGm5O32Yd_Muss6zFKzVtEQ9vYQJfT0eFEojO5mQJhfV9Eh2vFmNqkq_Sy7Xg3s3r8oK1uKLCwf1V4S59FLlb-2jbnZMuUzUQoaiJblK_4EWxN2ocDUHsoc1UURyRyNH646baSQZN3WvPL3lgPvOvk_0PYKzFhYD7gfVdRLPE_fOUkr0TZMLvRCkFmacH-RCJYun9WkfekG4DQC3_CWZW881XdB7zcCKpdPT0XhH7bV5g-MUSXQO7tMCekbyx74gJXwSVGL-ND7IoJFr-TnAJreIuFeekkKXsCE7E70FbX6X0-EV8nKqzehl8USZAgMBAAGjggFoMIIBZDAOBgNVHQ8BAf8EBAMCB4AwHwYDVR0lBBgwFgYIKwYBBQUHAwMGCisGAQQBgjcKAwUwDAYDVR0TAQH_BAIwADA6BglghkgBhvhCAQ0ELRYrQ2VydGlmaWNhdGUgZ2VuZXJhdGVkIHdpdGggU1NMLmNvbSBNYW5hZ2VyLjCBugYDVR0gBIGyMIGvMIGsBggrBgEFBQcDAzCBnzArBggrBgEFBQcCARYfaHR0cDovL3d3dy5zc2x0b29scy5jb20vbWFuYWdlcjBwBggrBgEFBQcCAjBkMBYWD1NTTC5jb20gTWFuYWdlcjADAgEBDEpDZXJ0aWZpY2F0ZSBnZW5lcmF0ZWQgd2l0aCBTU0wuY29tIE1hbmFnZXIuIENsaWNrICJNb3JlIEluZm8iIGZvciBkZXRhaWxzLjAqBgNVHRIEIzAhhh9odHRwOi8vd3d3LnNzbHRvb2xzLmNvbS9tYW5hZ2VyMA0GCSqGSIb3DQEBCwUAA4IBAQA4nNnR9yLQZBC8dZ1VtZTKm7Ak1lej-1I4XNAnE3Pk4nxTe4d2RoIhKJGyar2b07Ewz3YbWy4ohiJgr0t8raO0soosRTzxjVjNxdUGMeABsBl1P02HnW7ovyny0uQTz8sZ6DXZ6DOfPJwyCZJo9Pif5_LJyS_P820i41ZtVWq2S07J8xg4J23NEJczLGWHcpBAcIMEQZZtDsxJlXBU-VQ39pPHXROoMqWTq-KOUzxbLqBKvsA4i6PzObHFni8aOpF_yBfWB-gV-okfNYvevAUv4zou_tBjlh4iJyasA8-Hw5ruRQTrpWWpL6jTyLkiNxFtgm8P7DIr7RogjHZ_KItQdAAFWC41MDk=');

COMMIT;


-- -----------------------------------------------------
-- Data for table `TB_SMARTPHONE`
-- -----------------------------------------------------
START TRANSACTION;
USE `tccAnhembi`;
INSERT INTO `TB_SMARTPHONE` (`ID_SMARTPHONE`, `IMEI`, `ICCID`, `TB_USUARIOS_ID_USUARIO`) VALUES (1, '89550312000001222984', '35897560528917', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `TB_DISPOSITIVOS_has_TB_GRUPOS`
-- -----------------------------------------------------
START TRANSACTION;
USE `tccAnhembi`;
INSERT INTO `TB_DISPOSITIVOS_has_TB_GRUPOS` (`TB_DISPOSITIVOS_ID_DISPOSITIVO`, `TB_GRUPOS_ID_GRUPO`) VALUES (1, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `TB_USUARIOS_has_TB_GRUPOS`
-- -----------------------------------------------------
START TRANSACTION;
USE `tccAnhembi`;
INSERT INTO `TB_USUARIOS_has_TB_GRUPOS` (`TB_USUARIOS_ID_USUARIO`, `TB_GRUPOS_ID_GRUPO`) VALUES (1, 1);

COMMIT;

